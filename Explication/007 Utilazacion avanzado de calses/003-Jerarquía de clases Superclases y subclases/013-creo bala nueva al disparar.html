  <!doctype html>
  <html>
  <head>    
      <style>
          #nave { position:absolute; width: 100px; height: 100px; }
          .roca { width:50px; position:absolute; }
          .bala{width:50px;}
          body{background:url("estrellas.jpeg");background-size:cover;}
      </style>
  </head>

  <body>
      <img src="nave.png" id="nave">
  </body>

  <script>
      // Variables globales
      let anchopagina = window.innerWidth				
      let altopagina = window.innerHeight			
      
      // Primero declaramos una clase madre (abstracta)
      class Entidad{											
        constructor(x,y,a,v){
          this.posx = x;
          this.posy = y;
          this.angulo = a;  	
          this.velocidad = v;
        }
      }
      // Luego declaro las clases concretas
      class Bala extends Entidad {				
        constructor(x,y,a,v){
          super(x, y, a, v);							
        }
      }
      class Jugador extends Entidad {			
        constructor(x,y,a,v){
          super(x, y, a, v);							
        }
      }
      class Roca extends Entidad {				
        constructor(x,y,a,e,v){
          super(x, y, a, v);																
          this.escala = e;								
        }
      }
      // Voy a crear rocas
      let numero_rocas = 100;													
      let rocas = [];																	
      for(let i = 0;i<numero_rocas;i++){							
        let posx_aleatoria = Math.random()*anchopagina	
        let posy_aleatoria = Math.random()*altopagina		
        let angulo_aleatorio = Math.random()*360
        let escala_aleatoria = Math.random()*1
        rocas.push(new Roca(
          posx_aleatoria,
          posy_aleatoria,
          angulo_aleatorio,
          escala_aleatoria,
          0
        ))								
      }
      // Ahora creo una instancia del jugador
      let nave = document.querySelector("#nave");
      let InstanciaJugador = new Jugador(
        Math.random()*anchopagina,
        Math.random()*altopagina,
        0,0)		 																
      nave.style.left = InstanciaJugador.posx+"px";
      nave.style.top = InstanciaJugador.posy+"px";

        let numero_balas = 0;												// Indico el numero de balas actual
        let balas = [];	
      
      document.onkeydown = function(tecla){		
        // w = 87, s = 83, a = 65 , d= 68
        switch(tecla.keyCode){     
          case 87:			
            InstanciaJugador.posy -= 5;	
            break;
          case 83:			
            InstanciaJugador.posy += 5;	
            break;
          case 65:			
            InstanciaJugador.posx -= 5;	
            break;
          case 68:			
              InstanciaJugador.posx += 5;
              break;
          case 32:
            balas.push(new Bala(
                InstanciaJugador.posx,
                InstanciaJugador.posy,
                0,0
            ));
            let nueva_bala = document.createElement("img"); // Creo una nueva imagen
            nueva_bala.classList.add("bala")								// Le añado la clase roca
            nueva_bala.src = "bala.png"											// Cargo la imagen de la roca
            nueva_bala.style.position = "absolute"					// Le pongo absoluto para poder mover con libertad
            nueva_bala.style.left = InstanciaJugador.posx+"px"					// Le pongo su posicion X
            nueva_bala.style.top = InstanciaJugador.posy+"px"						// Le pongo su posicion Y
            document.querySelector("body").appendChild(nueva_bala)	// Añado la roca al body
                break;


        }
        nave.style.left = InstanciaJugador.posx+"px";
        nave.style.top = InstanciaJugador.posy+"px";
      }
      // Voy a dibujar rocas
      for(let i = 0;i<numero_rocas;i++){
        let nueva_roca = document.createElement("img"); 
        nueva_roca.classList.add("roca")								
        nueva_roca.src = "roca.png"											
        nueva_roca.style.position = "absolute"					
        nueva_roca.style.left = rocas[i].posx+"px"					
        nueva_roca.style.top = rocas[i].posy+"px"						
        nueva_roca.style.transform = "rotate("+rocas[i].angulo+"deg)  scale("+rocas[i].escala+")"	
        document.querySelector("body").appendChild(nueva_roca)	
      }
  </script>
  </html>
